(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[38],{1382:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var n=t(3),r=t(0),c=t.n(r),i=t(353),o=t(1374);function s(e){const a=Object(n.a)({},e),t=a.message,r=a.type;return c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,{container:!0,spacing:0,alignContent:"center",justify:"center"},c.a.createElement(i.a,{item:!0}),c.a.createElement(o.a,{color:"error"===r?"secondary":"primary"})," ",c.a.createElement("span",null,t,".")))}},1389:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var n=t(20),r=t.n(n),c=t(39),i=t(75);function o(e){return s.apply(this,arguments)}function s(){return(s=Object(c.a)(r.a.mark((function e(a){var t,n,c,o,s,l,u,m,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.fichier,n=a.nom,c=a.modele,o=a.champ,s=a.objet,l=a.obj,u=a.handleprogress,(m=new FormData).append(l.cle,s.id),m.append("modele",c),m.append("champ",o),m.append("nom",n),m.append("cle",l.cle),m.append("valeur",l.valeur),m.append("file",t),e.next=11,i.b.post("/medias/upload",m,{herdears:{"Content-Type":"multipart/form-data"},onUploadProgress:u});case 11:return d=e.sent,e.abrupt("return",d.data);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1390:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));const n={selectableRows:"none",textLabels:{body:{noMatch:"Auccun enregistrement trouv\xe9",toolTip:"tri",columnHeaderTooltip:e=>"tri pour ".concat(e.label)},pagination:{next:"Page suivante",previous:"Page pr\xe9c\xe9dente",rowsPerPage:"Lignes par page:",displayRows:"sur"},toolbar:{search:"Rechercher",downloadCsv:"T\xe9l\xe9charger en CSV",print:"Imprimer",viewColumns:"Afficher les collones",filterTable:"Fiiltrer la table"},filter:{all:"Tout",title:"FILTRES",reset:"RESET"},viewColumns:{title:"Afficher les collones",titleAria:"Afficher/Cacher les collones"},selectedRows:{text:"lignes(s) s\xe9lection\xe9es",delete:"Supprimer",deleteAria:"Supprimer les lignes s\xe9lectionn\xe9es"}}}},1410:function(e,a,t){"use strict";var n=t(0),r=t(61);a.a=Object(r.a)(n.createElement("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined")},1411:function(e,a,t){"use strict";var n=t(0),r=t(61);a.a=Object(r.a)(n.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")},1417:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var n=t(20),r=t.n(n),c=t(39),i=t(75);class o{getTouslesMagasins(e,a,t,n){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e+=1,t.next=3,i.b.get("/magasins?itemsPerPage=".concat(a,"&page=").concat(e));case 3:return n=t.sent,t.abrupt("return",n.data);case 5:case"end":return t.stop()}}),t)})))()}ajoutMagasin(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.post("/magasins",e);case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}miseajourMagasin(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.put("/magasins/"+e.id,e);case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}suppressionMagasin(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.delete("/magasins/"+e.id,{method:"DELETE",herdears:{Accept:"application/json"}});case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}}},1448:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var n=t(20),r=t.n(n),c=t(39),i=t(75);class o{getTouslesStocks(e,a,t,n){return Object(c.a)(r.a.mark((function n(){var c,o,s,l,u,m;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e+=1,n.next=3,i.b.get("/stocks?itemsPerPage=".concat(a,"&page=").concat(e,"&produit=").concat(null!==(c=null===t||void 0===t||null===(o=t.produit)||void 0===o?void 0:o.id)&&void 0!==c?c:"","&magasin=").concat(null!==(s=null===t||void 0===t||null===(l=t.magasin)||void 0===l?void 0:l.id)&&void 0!==s?s:"","&actif=").concat(null!==(u=t.actif)&&void 0!==u?u:""));case 3:return m=n.sent,n.abrupt("return",m.data);case 5:case"end":return n.stop()}}),n)})))()}ajoutStock(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.post("/stocks",e);case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}miseajourStock(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.put("/stocks/"+e.id,e);case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}suppressionStock(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.delete("/stocks/"+e.id,{method:"DELETE",herdears:{Accept:"application/json"}});case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}togleactifStock(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.put("/stocks/"+e.id,{actif:!e.actif});case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}getStockActifDeMagasin(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.get("/stocks?itemsPerPage=1000&page=0&magasin=".concat(e.id,"&actif=1"));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}}},1449:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var n=t(20),r=t.n(n),c=t(39),i=t(75);class o{getTouslesClients(e,a,t,n){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e+=1,t.next=3,i.b.get("/clients?itemsPerPage=".concat(a,"&page=").concat(e));case 3:return n=t.sent,t.abrupt("return",n.data);case 5:case"end":return t.stop()}}),t)})))()}ajoutClient(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.post("/clients",e);case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}miseajourClient(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.put("/clients/"+e.id,e);case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}suppressionClient(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.delete("/clients/"+e.id,{method:"DELETE",herdears:{Accept:"application/json"}});case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}togleactifClient(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.put("/clients/"+e.id,{actif:!e.actif});case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}misajourStatutClient(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.put("clients/"+e.id,{statut:e.statut});case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}togleestsocieteClient(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.put("/clients/"+e.id,{estsociete:!e.estsociete});case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}ajoutMouvementdecompte(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.put("clients/mouvement/"+e.client,e);case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}}},1500:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var n=t(20),r=t.n(n),c=t(39),i=t(75);class o{getTouslesAdresses(e,a,t,n){return Object(c.a)(r.a.mark((function n(){var c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e+=1,n.next=3,i.b.get("/adresses?itemsPerPage=".concat(a,"&page=").concat(e,"&id=").concat(t," "));case 3:return c=n.sent,n.abrupt("return",c.data);case 5:case"end":return n.stop()}}),n)})))()}ajoutAdresse(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.post("/adresses",e);case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}miseajourAdresse(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.put("/adresses/"+e.id,e);case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}suppressionAdresse(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.delete("/adresses/"+e.id,{method:"DELETE",herdears:{Accept:"application/json"}});case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}togleestprincipaleAdresse(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.put("/adresses/"+e.id,{estprincipale:!e.estprincipale});case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}}},1501:function(e,a,t){"use strict";const n={supprimerUnElementDuTableau:(e,a)=>(e.splice(a,1),e)};a.a=n},1580:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var n=t(20),r=t.n(n),c=t(39),i=t(75);class o{getTouslesCommandes(e,a,t,n){return Object(c.a)(r.a.mark((function n(){var c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e+=1,n.next=3,i.b.get("/commandes?itemsPerPage=".concat(a,"&page=").concat(e,"&client=").concat(t.Client.id,"&magasin=").concat(t.Magasin.id,"&statut=").concat(t.statut));case 3:return c=n.sent,n.abrupt("return",c.data);case 5:case"end":return n.stop()}}),n)})))()}ajoutCommande(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.post("/commandes",e);case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}miseajourCommande(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.put("/commandes/"+e.id,e);case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}suppressionCommande(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.delete("/commandes/"+e.id,{method:"DELETE",herdears:{Accept:"application/json"}});case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}misajourStatutCommande(e){return Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.b.put("commandes/statut/"+e.id,{statut:e.statut});case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}),a)})))()}}},1726:function(e,a,t){"use strict";var n=t(0),r=t(61);a.a=Object(r.a)(n.createElement("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"}),"Print")},2050:function(e,a,t){"use strict";t.r(a);var n=t(3),r=t(17),c=t(0),i=t.n(c),o=t(1580),s=t(133),l=t(1403),u=t.n(l),m=t(1390),d=t(447),p=t(2029),g=t(451),b=t(1377),f=t(356),v=t(354),h=t(355),E=t(1382),j=(t(1404),t(1405),t(75)),O=t(2039),y=t(2035),C=t(2036),w=t(1385),x=t(1381),k=t(1384),S=t(1730),q=t(1501),M=t(1448),P=t(353),A=t(2024),L=t(623),T=t(2023),N=t(624),F=t(1684),R=t(2022),D=t(1371),I=t(50);function z(e){const a=e.state,t=e.fonctions,n=e.queries;return i.a.createElement("div",null,i.a.createElement(P.a,{container:!0,spacing:4,justify:"center"},i.a.createElement(P.a,{item:!0,lg:8,md:8,sm:12,xs:12},i.a.createElement(D.a,{theme:Object(j.a)()},i.a.createElement(I.ValidatorForm,{onSubmit:t.allerADetails,onError:e=>console.log(e)},i.a.createElement(b.a,null,i.a.createElement(A.a,{action:i.a.createElement(L.a,{"aria-label":"",onClick:t.AnnulerEnregistrement},"x"),title:"Choisir le magasin et le client",subheader:""}),i.a.createElement(T.a,{className:" px-6 pt-6 pb-6"}," ",i.a.createElement(P.a,{container:!0,spacing:4,direction:"column"},n.queryMagasins.isLoading?i.a.createElement(E.a,{message:"Chargement des magasins"}):i.a.createElement(i.a.Fragment,null,i.a.createElement(P.a,{item:!0},n.queryClients.isLoading?i.a.createElement(E.a,{message:"chargement des magasins"}):i.a.createElement(N.a,{fullWidth:!0},i.a.createElement(I.SelectValidator,{fullWidth:!0,label:"Choisir un client",id:"client",name:"client",value:a.commande.client,validators:["required"],errorMessages:["Le client est requis"],onChange:t.handleChange},n.queryClients.data.rows.map(e=>i.a.createElement(F.a,{key:e.id,value:e.id},e.nom," ",e.prenom,"[",e.adresse,"-",e.telephone,"]"))))),i.a.createElement(P.a,{item:!0},n.queryMagasins.isLoading?i.a.createElement(E.a,{message:"chargement des magasins"}):i.a.createElement(I.SelectValidator,{fullWidth:!0,label:"Choisir un magasin",name:"magasin",value:a.commande.magasin,validators:["required"],errorMessages:["Le magasin est requis"],onChange:t.handleChange},n.queryMagasins.data.rows.map(e=>i.a.createElement(F.a,{key:e.id,value:e.id},e.nom)))),i.a.createElement(P.a,{item:!0},i.a.createElement(I.TextValidator,{value:a.commande.adresse,fullWidth:!0,id:"adresse",name:"adresse",label:"Adresse de livraison",validators:[],errorMessages:["Adresse de livraison obligatoire"],onChange:t.handleChange}))))),i.a.createElement(R.a,null,i.a.createElement(P.a,{container:!0,alignItems:"center",justify:"space-between"},i.a.createElement(P.a,{item:!0},i.a.createElement(g.a,{variant:"outlined",color:"secondary",onClick:t.AnnulerEnregistrement},"Annuler")),i.a.createElement(P.a,{item:!0},i.a.createElement(g.a,{color:"primary",variant:"contained",type:"submit"},i.a.createElement("span",{className:"pl-2 capitalize"},i.a.createElement(d.a,null," Suivant >>"))))))))))))}var H=t(1685),V=t(2042),Q=t(1693),B=t(1688),W=t(1687),J=t(627),U=t(449),_=t(1374),Y=t(2045);function G(e){const a=e.state,t=e.fonctions,n=e.queries;return i.a.createElement("div",null,i.a.createElement(P.a,{container:!0,spacing:1,justify:"center"},i.a.createElement(P.a,{item:!0,lg:12,md:12,sm:12,xs:12},i.a.createElement(D.a,{theme:Object(j.a)()},i.a.createElement(b.a,{className:" px-6 pt-6 pb-6"},i.a.createElement(A.a,{action:i.a.createElement(L.a,{"aria-label":"",onClick:t.AnnulerEnregistrement},"x"),title:"client:".concat(a.commande.Client.nom," \n                               "),subheader:"\n                                magasin: ".concat(a.commande.Magasin.nom)}),i.a.createElement(T.a,{className:" px-6 pt-6 pb-6"}," ",i.a.createElement("form",null,i.a.createElement(P.a,{container:!0,spacing:4,direction:"column"},i.a.createElement(P.a,{item:!0},i.a.createElement(H.a,{className:"mb-4"},i.a.createElement(V.a,null,i.a.createElement(Q.a,{className:"bg-default"},i.a.createElement(B.a,{key:"numero",align:"left",className:"pl-sm-24"},"#"),i.a.createElement(B.a,{key:"produit",align:"left",className:"pl-sm-24"},"Produit"),i.a.createElement(B.a,{key:"quantite",align:"right",className:"pl-sm-24"},"Quantit\xe9"),i.a.createElement(B.a,{key:"pu",align:"right",className:"pl-sm-24"},"Prix unitaire"),i.a.createElement(B.a,{key:"pt",align:"right",className:"pl-sm-24"},"Prix total"),i.a.createElement(B.a,{key:"action",align:"right",className:" pl-sm-24"},"Action"))),i.a.createElement(W.a,null,a.commande.Lignecommandes.map((e,a)=>{var r,c,o,s;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Q.a,{key:a},i.a.createElement(B.a,{className:"pl-sm-24 capitalize",align:"left"},a+1),i.a.createElement(B.a,{className:"pl-sm-24 capitalize",align:"left"},n.queryStocks.isLoading?i.a.createElement(E.a,{message:"chargement des produits"}):i.a.createElement(i.a.Fragment,null,i.a.createElement(N.a,{fullWidth:!0},i.a.createElement(J.a,{value:e.stock,label:"Produit",name:"stock",key:"stock",variant:"outlined",id:"stock".concat(a),onChange:e=>{t.handleSelectionStock(e,a)}},n.queryStocks.data.rows.map(e=>i.a.createElement(F.a,{key:e.id,value:e.id},e.Produit.nom)))))),i.a.createElement(B.a,{className:"pl-sm-24 capitalize",align:"right"},i.a.createElement(U.a,{id:"quantite",type:"number",fullWidth:!0,value:null!==(r=null===e||void 0===e?void 0:e.quantite)&&void 0!==r?r:1,label:"Quantite",name:"quantite",key:"quantite",variant:"outlined",helperText:" stock: ".concat(null!==(c=null===e||void 0===e?void 0:e.quantiteenstock)&&void 0!==c?c:""),error:e.error,onChange:e=>{t.handleChangeQuantite(e,a)}})),i.a.createElement(B.a,{className:"pl-sm-24 capitalize",align:"right"},i.a.createElement(U.a,{id:"prixunitaire",type:"number",fullWidth:!0,value:null!==(o=null===e||void 0===e?void 0:e.prixunitaire)&&void 0!==o?o:0,label:"Prix unitaire",name:"prixunitaire",key:"prixunitaire",variant:"outlined"})),i.a.createElement(B.a,{className:"pl-sm-24 capitalize",align:"right"},i.a.createElement(U.a,{id:"prixtotal",type:"number",fullWidth:!0,value:null!==(s=null===e||void 0===e?void 0:e.prixtotal)&&void 0!==s?s:0,label:"Prix total",name:"prixtotal",key:"prixtotal",variant:"outlined"})),i.a.createElement(B.a,{className:"pl-sm-24 capitalize",align:"right"},i.a.createElement(g.a,{variant:"contained",color:"secondary",onClick:()=>t.handleClickSurSupprimer(a)},"Supprimer"))))}),i.a.createElement(Q.a,null,i.a.createElement(B.a,{colSpan:4,align:"right"},i.a.createElement(d.a,{variant:"h6"},"Total HT")),i.a.createElement(B.a,{align:"right"},i.a.createElement(d.a,null,(a.commande.soustotal-18*a.commande.soustotal/100).toLocaleString("fr-FR")))),i.a.createElement(Q.a,null,i.a.createElement(B.a,{colSpan:4,align:"right"},i.a.createElement(d.a,{variant:"h6"},"Taxe(18%)")),i.a.createElement(B.a,{align:"right"},(18*a.commande.soustotal/100).toLocaleString("fr-FR"))),i.a.createElement(Q.a,null,i.a.createElement(B.a,{colSpan:4,align:"right"},i.a.createElement(d.a,{variant:"h6"},"Total TTC")),i.a.createElement(B.a,{align:"right"},i.a.createElement(d.a,{variant:"h6"},a.commande.soustotal.toLocaleString("fr-FR")))))),i.a.createElement("div",{className:"flex justify-end px-4 mb-4"},i.a.createElement(g.a,{variant:"contained",color:"primary",onClick:t.handleClickSurAjouter},"Ajouter un produit")))))),i.a.createElement(R.a,null,i.a.createElement(P.a,{container:!0,alignItems:"center",justify:"space-between"},i.a.createElement(P.a,{item:!0},i.a.createElement(g.a,{variant:"outlined",color:"secondary",onClick:t.handleClickSurPrecedent},"<< Pr\xe9c\xe9dent")),i.a.createElement(P.a,{item:!0},i.a.createElement(g.a,{color:"primary",variant:"contained",onClick:t.handleClickSurEnregistrer},n.mutationMiseajour.isLoading||n.mutationAjout.isLoading?i.a.createElement(_.a,{color:"inherit"}):i.a.createElement(Y.a,null),i.a.createElement("span",{className:"pl-2 capitalize"},"Enregistrer"))))))))))}function K(e){const a=e.state,t=e.fonctions,o=e.queries,l=e.queryClient,u={id:1,stock:0,quantite:1,prixunitaire:0,prixtotal:0},m=Object(c.useState)(Object(n.a)(Object(n.a)({},a),{},{etape:0,etapes:[{index:0,label:"Informations sur le client"},{index:1,label:"D\xe9tails de la commande"}],rechercheStock:{produit:{id:""},magasin:{id:""},actif:1}})),p=Object(r.a)(m,2),b=p[0],f=p[1],v=new M.a;t.allerAClient=()=>{f(Object(n.a)(Object(n.a)({},b),{},{etape:0}))},t.handleChange=({target:{name:e,value:a}})=>{let t=Object(n.a)({},b.commande);t[e]=a,f(Object(n.a)(Object(n.a)({},b),{},{commande:Object(n.a)(Object(n.a)({},b.commande),t)}))},console.log("*********** ".concat(JSON.stringify(b.commande),"******************")),t.allerADetails=()=>{var e=o.queryMagasins.data.rows.find(e=>e.id===+b.commande.magasin),a=o.queryClients.data.rows.find(e=>e.id===+b.commande.client);f(Object(n.a)(Object(n.a)({},b),{},{commande:Object(n.a)(Object(n.a)({},b.commande),{},{Client:null!==a&&void 0!==a?a:0,Magasin:null!==e&&void 0!==e?e:0}),rechercheStock:Object(n.a)(Object(n.a)({},b.rechercheStock),{},{magasin:{id:b.commande.magasin}}),etape:1}))},t.handleSelectionStock=(e,a)=>{var t=b.commande.Lignecommandes;t[a].stock=e.target.value;const r=o.queryStocks.data.rows.find(e=>e.id===t[a].stock);let c=r.prixdedetail;b.commande.quantite>=r.quantitedegros?c=r.prixdegros:b.commande.quantite>=r.quantitededemisgros&&(c=r.prixdedemigros),t[a].prixunitaire=c;const i=r.quantiteenstock;t[a].quantiteenstock=i,i<t[a].quantite?(t[a].error=!0,t[a].quantite=0):t[a].error=!1,t[a].prixtotal=t[a].quantite*c,console.log("*********** ".concat(JSON.stringify(t),"******************"));const s=j(t,b.commande.taxe);f(Object(n.a)(Object(n.a)({},b),{},{commande:Object(n.a)(Object(n.a)({},b.commande),{},{Lignecommandes:t,soustotal:s.sousTotal,montant:s.total})}))},t.handleClickSurSupprimer=e=>{var a=b.commande.Lignecommandes;a=q.a.supprimerUnElementDuTableau(a,e);const t=j(a,b.commande.taxe);f(Object(n.a)(Object(n.a)({},b),{},{commande:Object(n.a)(Object(n.a)({},b.commande),{},{Lignecommandes:a,soustotal:t.sousTotal,montant:t.total})}))},t.handleClickSurAjouter=()=>{var e=b.commande.Lignecommandes;e.push(u),f(Object(n.a)(Object(n.a)({},b),{},{commande:Object(n.a)(Object(n.a)({},b.commande),{},{Lignecommandes:e})}))},t.handleChangeQuantite=(e,a)=>{var t=b.commande.Lignecommandes;t[a].quantite=e.target.value;const r=o.queryStocks.data.rows.find(e=>e.id===t[a].stock);let c=r.prixdedetail;e.target.value>=r.quantitedegros?c=r.prixdegros:e.target.value>=r.quantitededemisgros&&(c=r.prixdedemigros);const i=r.quantiteenstock;t[a].quantiteenstock=i,i<t[a].quantite?(t[a].error=!0,t[a].quantite=0):t[a].error=!1,t[a].prixunitaire=c,t[a].prixtotal=t[a].quantite*c;const s=j(t,b.commande.taxe);f(Object(n.a)(Object(n.a)({},b),{},{commande:Object(n.a)(Object(n.a)({},b.commande),{},{Lignecommandes:t,soustotal:s.sousTotal,montant:s.total})}))},t.handleClickSurPrecedent=()=>{f(Object(n.a)(Object(n.a)({},b),{},{etape:0}))},t.handleClickSurEnregistrer=()=>{console.log("***********enregistrement d'une nouvelle commande******************"),console.log(b.commande),t.enregistrerCommande(b.commande)};const h=w.b().shape({magasin:w.c().required("Le magasin est requis"),client:w.c().required("Le client est requis")}),E={commande:Object(x.c)({resolver:Object(k.yupResolver)(h),defaultValues:b.commande})};o.queryStocks=Object(s.useQuery)(["Stock",b.rechercheStock],()=>v.getTouslesStocks(0,1e3,b.rechercheStock,""),{keepPreviousData:!0});const j=(e,a)=>e.reduce((e,a)=>({sousTotal:e.sousTotal+a.prixtotal,total:e.sousTotal+a.prixtotal}),{sousTotal:0,total:0});return i.a.createElement(S.a,{sx:{width:"100%"}},i.a.createElement(O.a,{nonLinear:!0,activeStep:b.etape},b.etapes.map(e=>i.a.createElement(y.a,{key:e.label,completed:b.etape>e.index},i.a.createElement(C.a,{color:"inherit"},e.label)))),i.a.createElement("div",null,b.complet?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{sx:{mt:2,mb:1}},"F\xe9licitation, toutes les \xe9tapes ont \xe9t\xe9 achev\xe9s."),i.a.createElement(S.a,{sx:{display:"flex",flexDirection:"row",pt:2}},i.a.createElement(S.a,{sx:{flex:"1 1 auto"}}),i.a.createElement(g.a,{onClick:t.fermerFormulaire},"Quitter"))):i.a.createElement(i.a.Fragment,null,0===b.etape?i.a.createElement(z,{state:b,fonctions:t,queries:o,useforms:E,queryClient:l}):1===b.etape?i.a.createElement(G,{state:b,fonctions:t,queries:o,useforms:E,queryClient:l}):i.a.createElement("span",null,"Autre"))))}var X=t(625),Z=t(1322);var $=({queries:e,fonctions:a})=>i.a.createElement("div",{className:"mb-sm-30"},i.a.createElement(b.a,{className:"mb-sm-30"},i.a.createElement("form",null,i.a.createElement(P.a,{container:!0,spacing:2,direction:"column"},i.a.createElement(P.a,{item:!0},i.a.createElement(P.a,{container:!0,spacing:5,direction:"row"})),i.a.createElement(P.a,{item:!0},i.a.createElement(P.a,{container:!0,spacing:5,direction:"row"},i.a.createElement(P.a,{item:!0,sm:3,p:5},e.queryMagasins.isLoading?i.a.createElement(E.a,{message:"chargement des Magasins"}):i.a.createElement(N.a,{fullWidth:!0},i.a.createElement(X.a,{htmlFor:"Magasin"},"Choisir un magasin"),i.a.createElement(J.a,{id:"Magasin",variant:"outlined",onChange:a.handleChangeMagasin},i.a.createElement(F.a,{key:"0",value:null},"Tous les magasins"),e.queryMagasins.data.rows.map(e=>i.a.createElement(F.a,{key:e.id,value:e.id},e.nom))),i.a.createElement(Z.a,null))),i.a.createElement(P.a,{item:!0,sm:5,p:5},e.queryClients.isLoading?i.a.createElement(E.a,{message:"chargement des clients"}):i.a.createElement(N.a,{fullWidth:!0},i.a.createElement(X.a,{htmlFor:"Client"},"Choisir un client"),i.a.createElement(J.a,{id:"Client",variant:"outlined",onChange:a.handleChangeClient},i.a.createElement(F.a,{key:"0",value:null},"Tous les clients"),e.queryClients.data.rows.map(e=>i.a.createElement(F.a,{key:e.id,value:e.id},e.nom," ",e.prenom,"[",e.adresse,"-",e.telephone,"]"))),i.a.createElement(Z.a,null))),i.a.createElement(P.a,{item:!0,sm:3},i.a.createElement(N.a,{fullWidth:!0},i.a.createElement(X.a,{htmlFor:"Statut"},"Choisir un statut"),i.a.createElement(J.a,{id:"Statut",variant:"outlined",onChange:a.handleChangeStatut},i.a.createElement(F.a,{key:"0",value:null},"Tous les statuts"),["Nouveau","Valid\xe9e","Factur\xe9e","Annul\xe9e","Livr\xe9e"].map(e=>i.a.createElement(F.a,{key:e,value:e},e))),i.a.createElement(Z.a,null))))),i.a.createElement(P.a,{item:!0},i.a.createElement(P.a,{container:!0,spacing:2,direction:"row"}))))));var ee=e=>{var a,t;const r=e.state,c=e.fonctions,o=e.collonnes,s=e.queries,l=e.useform,j=e.onSubmit,O=e.queryClient;return i.a.createElement("div",{className:"m-sm-30"},i.a.createElement(f.a,{message:r.alert.message,severity:r.alert.severity,open:r.alert.open,handleAlertClose:!0===r.alert.automaticClose?()=>c.handleFermetureAlerte():()=>c.fermerAlerte()}),i.a.createElement("div",{className:"mb-sm-30"},i.a.createElement(v.a,{routeSegments:[{name:r.titre}]})),i.a.createElement("div",{className:"mb-sm-30"},i.a.createElement(d.a,{variant:"h4"},r.titre)),"affichage"===r.pagestate.mode?i.a.createElement(p.a,{in:r.pagestate.affichageTable,direction:"right",unmountOnExit:!0},i.a.createElement("div",null,i.a.createElement(g.a,{className:"mb-4",variant:"contained",color:"primary",onClick:()=>c.handleClicksurNouveau()},"Nouvelle commande"),i.a.createElement($,{queries:s,fonctions:c}),s.queryCommandes.isLoading?i.a.createElement(E.a,{message:"Chargement des donn\xe9es...",type:"info"}):s.queryCommandes.isError?i.a.createElement(E.a,{message:"Erreur lors du chargement des donn\xe9es::"+s.queryCommandes.error,type:"error"}):i.a.createElement(u.a,{title:r.titre,data:s.queryCommandes.data.rows.map(e=>({commande:e})),columns:o,options:Object(n.a)(Object(n.a)({},m.a),{},{serverSide:!0,count:s.queryCommandes.data.count,rowsPerPageOptions:[20,30,50],rowsPerPage:r.tableconfig.rowsPerPage,textLabels:Object(n.a)(Object(n.a)({},m.a.textLabels),{},{toolbar:Object(n.a)(Object(n.a)({},m.a.textLabels.toolbar),{},{search:"Rechercher par id"})}),onChangePage:e=>c.handleChangePage(e),onChangeRowsPerPage:e=>c.handleChangeRowPerPage(e),onSearchChange:e=>c.handleSearchChange(e),onFilterChange:()=>c.handleFilterChange()})}),i.a.createElement(b.a,{className:"w-full overflow-auto",elevation:8},i.a.createElement(h.a,{open:r.dialogueSuppressionOuvert,onConfirmDialogClose:c.fermerDialogueSuppression,onYesClick:c.confirmerSuppression,text:null!==(a="Confirmez la suppression de "+(null===(t=r.commande)||void 0===t?void 0:t.nom))&&void 0!==a?a:""})))):i.a.createElement(K,{state:r,fonctions:c,queries:s,useform:l,onSubmit:j,queryClient:O}))},ae=t(13),te=t(87),ne=t(1726),re=t(1410),ce=t(1411),ie=t(2046),oe=t(343),se=t(1331),le=t(1375),ue=t(2015),me=t(1432);Object(oe.a)(e=>{e.palette,Object(ae.a)(e,["palette"]);return{userMenu:{display:"flex",alignItems:"center",cursor:"pointer",borderRadius:24,padding:4,"& span":{margin:"0 8px"}},menuItem:{display:"flex",alignItems:"center",minWidth:185}}});function de(e){const a=Object(oe.a)(e=>{e.palette,Object(ae.a)(e,["palette"]);return{userMenu:{display:"flex",alignItems:"center",cursor:"pointer",borderRadius:24,padding:4,"& span":{margin:"0 8px"}},menuItem:{display:"flex",alignItems:"center",minWidth:185}}}),t=e=>{switch(e.statut){case"Annul\xe9e":return"bg-error";case"Nouveau":return"bg-primary";case"Valid\xe9e":return"bg-green";case"Livr\xe9e":return"bg-gray";case"Factur\xe9e":return"bg-dark";default:return"bg-primary"}},n=(a,t)=>{e.handleClickSurAction(a,t)};return[{name:"commande",label:"ID",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,a,t)=>{var n,r;return null!==(n=null===(r=e.id)||void 0===r?void 0:r.toLocaleString("fr-FR"))&&void 0!==n?n:""}}},{name:"commande",label:"Dates",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,a,t)=>i.a.createElement(i.a.Fragment,null,i.a.createElement("small",{style:{whiteSpace:"nowrap"}},"Commande:  ",null==e.datecommande?"":Object(ue.a)(Object(me.a)(e.datecommande),"dd/MM/yyyy HH:mm")),i.a.createElement("br",null),e.datevalidation&&i.a.createElement("small",{style:{whiteSpace:"nowrap"}},"Validation:  ",null==e.datevalidation?"":Object(ue.a)(Object(me.a)(e.datevalidation),"dd/MM/yyyy HH:mm")),i.a.createElement("br",null),e.datefacturation&&i.a.createElement("small",{style:{whiteSpace:"nowrap"}},"Facturation:  ",null==e.datefacturation?"":Object(ue.a)(Object(me.a)(e.datefacturation),"dd/MM/yyyy HH:mm")),i.a.createElement("br",null),e.datelivraison&&i.a.createElement("small",{style:{whiteSpace:"nowrap"}},"Livraison:  ",null==e.datelivraison?"":Object(ue.a)(Object(me.a)(e.datelivraison),"dd/MM/yyyy HH:mm")),i.a.createElement("br",null),e.dateannulation&&i.a.createElement("small",{style:{whiteSpace:"nowrap"}},"Annulation:  ",null==e.dateannulation?"":Object(ue.a)(Object(me.a)(e.dateannulation),"dd/MM/yyyy HH:mm")))}},{name:"commande",label:"client",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,a,t)=>{var n,r,c,o,s,l;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{whiteSpace:"nowrap"}},i.a.createElement("strong",null,null!==(n=null===(r=e.Client)||void 0===r?void 0:r.nom)&&void 0!==n?n:"")),i.a.createElement("small",{style:{whiteSpace:"nowrap"}},null!==(c=null===(o=e.Client)||void 0===o?void 0:o.adresse)&&void 0!==c?c:""),i.a.createElement("br",null),i.a.createElement("small",{style:{whiteSpace:"nowrap"}},null!==(s=null===(l=e.Client)||void 0===l?void 0:l.telephone)&&void 0!==s?s:""))}}},{name:"commande",label:"magasin",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,a,t)=>{var n,r;return null!==(n=null===(r=e.Magasin)||void 0===r?void 0:r.nom)&&void 0!==n?n:""}}},{name:"commande",label:"Montant HT",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,a,t)=>{var n;return null!==(n=(.82*e.soustotal).toLocaleString("fr-FR"))&&void 0!==n?n:""}}},{name:"commande",label:"Taxe",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,a,t)=>{var n;return null!==(n=(.18*e.soustotal).toLocaleString("fr-FR"))&&void 0!==n?n:""}}},{name:"commande",label:"Montant total",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,a,t)=>{var n,r;return null!==(n=null===(r=e.montant)||void 0===r?void 0:r.toLocaleString("fr-FR"))&&void 0!==n?n:""}}},{name:"commande",label:"Validit\xe9",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,a,t)=>{var n,r;return null!==(n=null===(r=e.validite)||void 0===r?void 0:r.toLocaleString("fr-FR"))&&void 0!==n?n:""}}},{name:"commande",label:"Adresse de livraison",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,a,t)=>{var n;return null!==(n=e.adresse)&&void 0!==n?n:""}}},{name:"commande",label:"Statut",options:{filter:!1,sort:!1,display:!0,customBodyRender:(n,r,c)=>i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(te.j,{menuButton:i.a.createElement("div",{className:a.userMenu},i.a.createElement(se.a,{xsDown:!0},i.a.createElement(g.a,{size:"small",variant:"text",color:"primary",endIcon:i.a.createElement(ie.a,null)},i.a.createElement("small",{className:"border-radius-4  text-white px-2 py-2px "+t({id:n.id,statut:n.statut})},n.statut))))},(e=>{switch(e.statut){case"Annul\xe9e":return[];case"Nouveau":return[{id:1,nom:"Valider",statut:"Valid\xe9e"},{id:2,nom:"Annuler",statut:"Annul\xe9e"}];case"Valid\xe9e":return[{id:1,nom:"Facturer",statut:"Factur\xe9e"},{id:2,nom:"Annuler",statut:"Annul\xe9e"}];case"Factur\xe9e":return[{id:1,nom:"Livrer",statut:"Livr\xe9e"}];default:return[]}})(n).map(a=>i.a.createElement(F.a,{onClick:()=>e.handleChangementStatut({id:n.id,statut:a.statut}),key:a.id,value:a.statut},a.nom)))))}},{name:"commande",label:"Actions",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,r)=>i.a.createElement("div",null,i.a.createElement(te.j,{menuButton:i.a.createElement("div",{className:a.userMenu},i.a.createElement(se.a,{xsDown:!0},i.a.createElement(g.a,{size:"small",variant:"outlined",color:"primary",endIcon:i.a.createElement(ie.a,null)},"Actions")))},(e=>{switch(e.statut){case"Annul\xe9":return[{id:1,nom:"Imprimer",action:e=>n(e,"Imprimer"),icon:i.a.createElement(ne.a,{color:"primary"})}];case"Nouveau":return[{id:1,nom:"Imprimer",action:e=>n(e,"Imprimer"),icon:i.a.createElement(ne.a,{color:"primary"})},{id:2,nom:"Modifier",action:e=>n(e,"Modifier"),icon:i.a.createElement(re.a,{color:"primary"})},{id:3,nom:"Supprimer",action:e=>n(e,"Supprimer"),icon:i.a.createElement(ce.a,{color:"error"})}];case"Livr\xe9e":return[{id:1,nom:"Imprimer la commande",action:e=>n(e,"Imprimer"),icon:i.a.createElement(ne.a,{color:"primary"})},{id:2,nom:"Imprimer bon de livraison",action:e=>n(e,"Bondelivraison"),icon:i.a.createElement(ne.a,{color:"primary"})}];default:return[{id:1,nom:"Imprimer",action:e=>n(e,"Imprimer"),icon:i.a.createElement(ne.a,{color:"primary"})}]}})(e).map(a=>i.a.createElement(F.a,{onClick:()=>a.action(e),key:a.id,value:a.statut},a.icon,"   ",i.a.createElement("span",{className:"ml-5"},a.nom),i.a.createElement(le.a,null)))))}}]}t(1389);var pe=t(1449),ge=t(1417),be=t(1500);a.default=()=>{const e={nom:"",datecommande:"",montant:0,soustotal:0,remise:0,montantremise:0,taxe:18,validite:0,statut:"",client:0,magasin:0,adresse:"",Lignecommandes:[]},a={commande:e,commande1:null,titre:"Commandes clients",tableconfig:{page:0,rowsPerPage:30,recherche:{Client:{id:""},Magasin:{id:""},statut:""},filtre:""},pagestate:{mode:"affichage",action:"ajout",affichageTable:!0},alert:{severity:"severity",message:"",open:!1,automaticClose:!1},dialogueSuppressionOuvert:!1,rechercheStock:{produit:{id:""},magasin:{id:""}}},t=Object(c.useState)(a),l=Object(r.a)(t,2),u=l[0],m=l[1];let d=new o.a,p=new pe.a,g=new ge.a,b=new be.a;new M.a;const f=Object(s.useQueryClient)(),v=Object(s.useMutation)(d.misajourStatutCommande,{onSuccess:()=>{m(Object(n.a)(Object(n.a)({},u),{},{alert:{message:"Enregistrement r\xe9ussi",open:!0,severity:"success",automaticClose:!0}}))},onError:()=>{m(Object(n.a)(Object(n.a)({},u),{},{alert:{message:"Echec lors de l'enregistrement",open:!0,severity:"error",automaticClose:!0}}))},onSettled:()=>{f.invalidateQueries("Commandes")}}),h={handleFermetureAlerte:()=>{m(Object(n.a)(Object(n.a)({},u),{},{titre:"Commandes clients",alert:Object(n.a)(Object(n.a)({},u.alert),{},{open:!1}),pagestate:Object(n.a)(Object(n.a)({},u.pagestate),{},{mode:"affichage",affichageTable:!0})}))},handleClicksurNouveau:()=>{m(Object(n.a)(Object(n.a)({},u),{},{commande:e,titre:"Nouvelle commande",pagestate:{mode:"edition",action:"ajout",affichageTable:!1}}))},fermerAlerte:()=>{m(Object(n.a)(Object(n.a)({},u),{},{alert:Object(n.a)(Object(n.a)({},u.alert),{},{open:!1})}))},AnnulerEnregistrement:()=>{console.log("Annulation de l'enregistrement"),m(Object(n.a)(Object(n.a)({},u),{},{titre:"Commandes clients",pagestate:{mode:"affichage",action:"ajout",affichageTable:!0}}))},fermerDialogueSuppression:()=>{m(Object(n.a)(Object(n.a)({},u),{},{dialogueSuppressionOuvert:!1}))},confirmerSuppression:()=>{P.mutate(u.commande)},handleCloseDialoguephoto:()=>{m(Object(n.a)(Object(n.a)({},u),{},{dialoguephoto:Object(n.a)(Object(n.a)({},u.dialoguephoto),{},{open:!1})}))},handleChangeRowPerPage:e=>{m(Object(n.a)(Object(n.a)({},u),{},{tableconfig:Object(n.a)(Object(n.a)({},u.tableconfig),{},{rowsPerPage:e})}))},handleSearchChange:e=>{m(Object(n.a)(Object(n.a)({},u),{},{tableconfig:Object(n.a)(Object(n.a)({},u.tableconfig),{},{recherche:e})}))},handleChangePage:e=>{m(Object(n.a)(Object(n.a)({},u),{},{tableconfig:Object(n.a)(Object(n.a)({},u.tableconfig),{},{page:e})}))},handleClickSurAction:(e,a)=>{switch(console.log(a),a){case"Imprimer":window.open("".concat(j.c,"/api/commandes/imprimer/").concat(e.id),"_blanc");break;case"Modifier":m(Object(n.a)(Object(n.a)({},u),{},{titre:"Mise \xe0 jour commande #"+e.id,commande:e,pagestate:{mode:"edition",action:"misajour",affichageTable:!1}}));break;case"Supprimer":m(Object(n.a)(Object(n.a)({},u),{},{commande:e,dialogueSuppressionOuvert:!0}));break;case"Bondelivraison":window.open("".concat(j.c,"/api/commandes/bondelivraison/").concat(e.id),"_blanc")}},handledatedatecommandechange:e=>{m(Object(n.a)(Object(n.a)({},u),{},{commande:Object(n.a)(Object(n.a)({},u.commande),{},{datecommande:e})}))},handleChangementStatut:({id:e,statut:a})=>{v.mutate({id:e,statut:a})},updateStock:e=>{m(Object(n.a)(Object(n.a)({},u),{},{rechercheStock:Object(n.a)(Object(n.a)({},u.rechercheStock),{},{produit:e.produit,magasin:e.magasin})}))},enregistrerCommande:e=>{console.log("*********** ".concat(JSON.stringify(e),"******************")),e.id>0?(console.log("*********** ".concat(JSON.stringify("Mise \xe0 jour de la commande"),"******************")),q.mutate(e)):(console.log("*********** ".concat(JSON.stringify("Enregistrement de la nouvelle commande"),"******************")),S.mutate(e))},handleChangeClient:e=>{m(Object(n.a)(Object(n.a)({},u),{},{tableconfig:Object(n.a)(Object(n.a)({},u.tableconfig),{},{recherche:Object(n.a)(Object(n.a)({},u.tableconfig.recherche),{},{Client:{id:e.target.value}})})}))},handleChangeMagasin:e=>{m(Object(n.a)(Object(n.a)({},u),{},{tableconfig:Object(n.a)(Object(n.a)({},u.tableconfig),{},{recherche:Object(n.a)(Object(n.a)({},u.tableconfig.recherche),{},{Magasin:{id:e.target.value}})})}))},handleChangeStatut:e=>{m(Object(n.a)(Object(n.a)({},u),{},{tableconfig:Object(n.a)(Object(n.a)({},u.tableconfig),{},{recherche:Object(n.a)(Object(n.a)({},u.tableconfig.recherche),{},{statut:e.target.value})})}))}},E=Object(s.useQuery)(["Commandes",u.tableconfig.page,u.tableconfig.rowsPerPage,u.tableconfig.recherche,u.tableconfig.filtre],()=>d.getTouslesCommandes(u.tableconfig.page,u.tableconfig.rowsPerPage,u.tableconfig.recherche,u.tableconfig.filtre),{keepPreviousData:!0}),O=Object(s.useQuery)(["Clients",u.tableconfig.page,u.tableconfig.rowsPerPage,u.tableconfig.recherche,u.tableconfig.filtre],()=>p.getTouslesClients(0,1e3,u.tableconfig.recherche,u.tableconfig.filtre),{keepPreviousData:!0}),y=Object(s.useQuery)(["Magasins",u.tableconfig.page,u.tableconfig.rowsPerPage,u.tableconfig.recherche,u.tableconfig.filtre],()=>g.getTouslesMagasins(0,1e3,u.tableconfig.recherche,u.tableconfig.filtre),{keepPreviousData:!0}),C=Object(s.useQuery)(["Adresses",u.tableconfig.page,u.tableconfig.rowsPerPage,u.tableconfig.recherche,u.tableconfig.filtre],()=>b.getTouslesAdresses(0,1e3,u.tableconfig.recherche,u.tableconfig.filtre),{keepPreviousData:!0}),S=Object(s.useMutation)(d.ajoutCommande,{onSuccess:()=>{f.invalidateQueries("Commandes"),m(Object(n.a)(Object(n.a)({},u),{},{alert:{message:"Enregistrement r\xe9ussi",open:!0,severity:"success",automaticClose:!0}}))},onError:()=>{f.invalidateQueries("Commandes"),m(Object(n.a)(Object(n.a)({},u),{},{alert:{message:"Echec lors de l'enregistrement",open:!0,severity:"error",automaticClose:!0}}))}}),q=Object(s.useMutation)(d.miseajourCommande,{onSuccess:()=>{f.invalidateQueries("Commandes"),m(Object(n.a)(Object(n.a)({},u),{},{alert:{message:"Mise \xe0 jour R\xe9ussie.",open:!0,severity:"success",automaticClose:!0}}))},onError:()=>{f.invalidateQueries("Commandes"),m(Object(n.a)(Object(n.a)({},u),{},{alert:{message:"Echec lors de la mise \xe0 jour",open:!0,severity:"error",automaticClose:!0}}))}}),P=Object(s.useMutation)(d.suppressionCommande,{onSuccess:()=>{m(Object(n.a)(Object(n.a)({},u),{},{dialogueSuppressionOuvert:!1,alert:{message:"Supr\xe9ssion r\xe9ussie",open:!0,severity:"success"}}))},onError:()=>{m({alert:{message:"Echec lors de la supr\xe9ssion",open:!0,severity:"error"}})},onSettled:()=>{f.invalidateQueries("Commandes")}}),A={queryCommandes:E,mutationMiseajour:q,mutationAjout:S,mutationSuppression:P,queryClients:O,queryMagasins:y,queryAdresses:C},L=de(h),T=w.b().shape({}),N={magasin:Object(x.c)({resolver:Object(k.yupResolver)(T),defaultValues:{commande:u.commande}})};return i.a.createElement(ee,{state:u,fonctions:h,collonnes:L,queries:A,useform:N,onSubmit:e=>{var a;let t=Object(n.a)(Object(n.a)({},u.commande),e);void 0!==(null===(a=u.commande)||void 0===a?void 0:a.id)?A.mutationMiseajour.mutate(Object(n.a)({},t)):A.mutationAjout.mutate(Object(n.a)({},t))},queryClient:f})}}}]);